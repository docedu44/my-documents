---
title: RN starter
---

## Install
توسط دستور زیر می توان `expo` را نصب و یا آپدیت کنیم:
```shell
npm install --global expo-cli
```
توسط دستور زیر می توان یک پروژه `expo` ساخت:
```shell
expo init first-project
```
🎉  حال باید `android studio` را نصب کنیم و سپس باید در سایت `soft98` فایل `java SE development kit` را دانلود کنیم (jdk)

🎉 می توان از نرم افزار `expo Go` رو گوشی استفاده کرد برای کار کردن و نمایش خروجی و هم چنین می توان از `AVD` خود `Android Studio` نیز استفاده کرد تا یک مجازی ساز را روی سیستم نصب کند.

### expo doctor
توسط این بخش می توان `dependency` هایی ک ب پروژه ما نمی خورند را فیکس کنیم و ورژن آن ها دقیقا مطابق پکیج های اصلی ما باشند(هنگام ارور استفاده شود)
```shell
expo doctor --fix-dependencies
```

### Tips
🎉 در `React Native` در واقع `flex` به صورت پیش فرض تمام عرض و ارتفاع باقی مانده را به خود اختصاص می دهد و می توان درون آن دوباره از `flex` برای فرزندان نیز استفاده کرد:

```jsx
    <View style={{flex :1 }}>
        <View style={{flex :1, backgroundColor: '#FF5722'}} />
        <View style={{flex :2, backgroundColor: '#673AB7'}} />
        <View style={{flex :3, backgroundColor: '#FFEB3B'}} />
    </View>
```

🎉 برای اینکه یک تابع را در یک `useState` استفاده کنیم و چون مرسوم است که `useState` در ابتدای بدنه `function` تعریف شود، باید تابع مورد نظر را در خارج از بدنه تابع اصلی تعریف کنیم:

```jsx
    import React, { useState } from "react";
    import {Text, View } from "react-native";

    const minutesToMillis = (min) => min * 1000 * 60;

    export const Countdown = ({ minutes = 20, isPaused }) => {
    const [millies, setMillies] = useState(minutesToMillis(minutes))
    return (
        <View><Text>{millies}</Text></View>
    );};
 ```

🎉 از دستور زیر می توان برای `reset` کردن `metro` استفاده کنیم:
```shell
npx react-native start --reset-cache
```

🎉 برای استفاده از قابلیت عمودی و افقی برنامه `expo go` باید در فایل `app.json`، بخش `orientation` را تغییر دهیم:
```json
{
  "expo": {
    "orientation": "default"
    }
}
```
که 3 حالت دارد :`portrait`، `landscape` و `default` ک ما ب صورت بالا می نویسیم ک یعنی بر اساس تنظیمات گوشی باشد و برنامه را یکبار باید `reload` کنیم.

🎉 بهتر است ک فولدر `asstes` و `components` را درون یک فولدر ب نام `app` قرار دهیم و در فایل `app.json` آدرس موارد استفاده شده از `assets` را درست کنیم تا ساختار فایل ها بهتر شود.
## debugging
🎉 برای اینکه وارد حالت `developer tools` شویم، در `emulator` باید دکمه های `ctrl + m` را بزنیم و روی موبایل شخصی در `expo` باید گوشی را تکان دهیم و سپس گزینه `debug remote JS` را می زنیم

حال می توان از `console.log` استفاده کنیم و لاگ کد ها را ببینیم

همچنین می توان وارد بخش `sources` در مروگر شد و از حالت `debug` در آنجا استفاده کنیم.

می توان از `watch` نیز برای معرفی `variable` هایمان استفاده کنیم ک بعد از معرفی، ب ما مقدار لحظه ای آن ها را میدهد.

می توان پشت هر خطی از کد ها کلیک کنیم تا یک `indicator` پشت آن اضافه شود و هر وقت کد های ما اجرا شدن و ب آن نقطه رسید، `debugger` روند اجرای برنامه را متوقف کند و برای اینکه هر بار ک اجرای برنامه تمام می شود، دوباره ب `breakpoint`. مشخص شده برگردیم، باید برنامه را `reload` کنیم.

فراموش نشود ک بعد از اتمام کارمان حتما دوباره `ctrl + m` و `stop remote debugging` را بزنیم چون باعث کاهش سرعت توسعه می شود.

 🎉 ما می توانیم از نرم افزار های غیره هم برای مجازی ساز هم استفاده کنیم مثل : `nox player` و `blue stack` و غیره

## publish in expo
برای اینکه یک پروژه را روی سرور خود `expo` پابلیش کنیم و در دسترس دوستان و همکاران قرار دهیم بدون اینکه فایل نصبی آن را بسازیم، می توانیم ب صورت زیر عمل کنیم:

1. ابتدا پروژه را اجرا می کنیم و سپس در مرورگر روی گزینه `Publish or republish project` کلیک میکنیم

2. حال وارد ترمینال ادیتورمان می شویم و از همانجا وارد اکانت `expo` خودمان می شویم و یا اگر اکانتی نداریم، همانجا می توان ساخت و یا وارد سایت خود `expo` شد و یک اکانت جدید ساخت

3. حال صبر میکنیم تا پروسه ساخت تمام شود و سپس با استفاده از لینکی ک `expo` در اختیارمان می گذارد، نرم افزار خودمان را ب اشتراک بگذاریم.

## React Native CLI
برای استفاده از `react native cli` باید طبق داکیومنت آن، مواردی را رعایت کنیم و برنامه ها و فایل هایی را نصب کنیم:

[react native cli environment](https://reactnative.dev/docs/environment-setup)

ک خیلی از این موارد همراه با نصب `android studio` و `sdk` های لازم، رفع می شوند.

1. اما موارد پایین الزامی می باشد ک اولی در بخش `SDK Platforms` می باشد.

- `Android SDK Platform`
-  `Intel x86 Atom_64 System Image` یا `Google APIs Intel x86 Atom System Image`

2. و دومی نیز در `SDK Tools` می باشد:

- `Android SDK Build Tools`
- `Android Emulator`
- `Android SDK Platform-tools`
- `Google Play Licensing Library`
- `Intel x86 Emulator Accelerator (HAXM installer)` (نیاز ب فعالسازی مجازی ساز)

🎉 باید ورژن مربوط ب `platform`یی ک کار می کنیم(ورژن اندروید) را دانلود کنیم.

🎉 این موارد جزو مواردی هستند ک باید نصب باشند(باید تیک `Show packages details` زده شده باشد.) برای هر `sdk` ک برای نصب و دیدن آن ها باید حتما `vpn` باز باشد و حجم آن ها بسیار زیاد است.

🎉 همچنین هرکدام از موارد بالا اگر نصب نباشد و یا مشکلی داشته باشد، هنگام `build` ب ما ارور می دهد و می توانیم همان موقع دانلود کنیم.

 اما در مورد 3 باید یکسری پیکربندی ها انجام شود:

1. جستجو در ویندوز برای کلمه `environment` و انتخاب گزینه اول
2. در صفحه باز شده روی دکمه `Environment Variables` کلیک می کنیم.
3. آدرس موجود در بخش `Android SDK` برنامه `Android Studio` ک مربوط ب `Androind SDK Locarion` می باشد را کپی می کنیم.
4. ساخت یک متغیر محیطی ب نام `ANDROID_HOME` و قرار دادن آدرس کپی شده در قسمت `value`
5. حال باید `JAVA_HOME` را می سازیم و آدرس `jre` برنامه `android studio` را کپی می کنیم(`C:\Program Files\Android\Android Studio\jre`) و در `value` قرار می دهیم.
6. حال برای شناسایی `emulator` باید این آدرس را ب متغییر `Path` اضافه کنیم : `C:\Users\msaba\AppData\Local\Android\Sdk\platform-tools`

🎉 اگر `react-native-cli` نصب است، باید آن را پاک کنیم.

### Install
حال می توان توسط دستور زیر در مسیر دلخواهمان یک پروژه را بسازیم:
```shell
npx react-native init firstcliproject
```
🎉 تقریبا 140 مگابایت می باشد.
#### typescript
همچنین توسط دستور زیر می توان پروژه را با `ts` بسازیم:
```shell
npx react-native init firsttscliproject --template react-native-template-typescript
```
برای نامگذاری از `(-) dash` استفاده نشود

حال می توان توسط دستور زیر در مسیر پروژه، برنامه را اجرا کرد:
```shell
yarn android
```
🎉 هرگاه ب ارور خوردیم، یکبار باید ترمینال را ببندیم و دوباره باز کنیم.

🎉 تمام مراحل نصب اولیه باید `vpn` وصل باشد.

### connect to device
🎉 برای اجرای کد ها می توان ب صورت عمل کرد:

1. استفاده از مجازی ساز
2. استفاده از گوشی

[Physical device](https://reactnative.dev/docs/running-on-device)

برای استفاده در گوشی باید ب صورت زیر عمل کرد:

1. ابتدا باید بخش `Developer options` با 7 بار لمس `Build number` در مسیر `Settings → About phone → Software information` فعال می کنیم.
2. حال باید `USB debugging` و `Wireless debugging` از `Developer options` فعال کنیم.
3. دستگاه را با کابل ب رایانه وصل می کنیم.
4. اگر بخواهیم با کابل متصل ب رایانه کار کنیم، فقط کافیست دستور زیر را بزنیم و شروع ب کار کنیم:
```shell
npx react-native run-android
```
5. اما اگر بخواهیم با `wifi` وصل شویم، باید ابتدا توسط دستور زیر یک پورت برای اتصال ب مجازی ساز یا گوشیمان بسازیم:
```shell
$ adb -s <device name> reverse tcp:8081 tcp:8081
```
🎉 نام دستگاه را می توان توسط دستور زیر پیدا کرد:
```shell
$ adb devices
```
6. حال باید وارد برنامه ای ک هنگام زدن دستور مورد 4 زدیم، ساخته شد، شویم و گوشی را تکان دهیم و وارد `Settings` شویم
7. حال باید گزینه `Debug server host & port for device` را بزنیم.
8. حال باید `IPv4` سیستممان (دستور `ipconfig`) را همراه با `port`یی ک در مورد 5 مشخص کردیم، وارد کنیم و اوکی را بزنیم.(`192.168.100.251:8081`)
9. حال باید یک بار دیگر گوشی را تکان بدهیم و گزینه `Reload` را بزنیم.

:::caution Important
هر گاه برنامه ی جدیدی را برای کدنویسی خواستیم اجرا کنیم، باید بعد نصب پروژه، دوباره گوشی را با کابل ب سیستم وصل کنیم و بعد کدهایمان را اجرا کنیم تا برنامه جدید،
با نام جدید روی گوشیمان نصب شود و سپس از مورد 6 ب بعد را برای اتصال با `wifi` دوباره اجرا می کنیم.
:::

### react-native doctor
برای اینکه چک کنیم ک تمامی موارد لازم برای استفاده از `react-native` را روی سیستم خود داریم، می توانیم از پکیج زیر ک در ورژن `0.68` اضافه شده استفاده کنیم :
```shell
npx @react-native-community/cli doctor
```
موارد لازم را خودش رفع می کند و اگر موردی برای این پکیج قابل حل نباشد، ب صورت یک ارور ب ما می گوید ک کدام بخش مشکل دارد.

### Tips
- بعضی از پکیج هایی ک نصب می کنیم، یکسری وابستگی دارند ک باید آن ها نیز نصب شوند ک در خود داکیومنت ها موجود می باشد( مانند
[`react navigation`](/my-documents/docs/Experiences/react-native/react-native-packages#navigation) )

#### Licenses
اگر هنگام اجرا ب لایسنس ها گیر داد، می توان وارد آدرس زیر شد و در آنجا ترمینال را باز میکنیم و دستور زیر را میزنیم

`C:\Users\msaba\AppData\Local\Android\Sdk\tools\bin`
```shell
./sdkmanager --licenses
```
ک توسط این دستور تمامی لایسنس های مربوطه را نصب می کنم(اگر سوال پرسید، `y` را میزنیم)

🎉 برای دسترسی ب آدرس بالا می توان در `cmd` دستور `%appdata%` بزنیم و سپس یک فولدر ب عقب برگردیم.

#### gradlew clean
خیلی از مواقع پیش میاید ک هر بار ک پروژه را ران می کنیم، با ارور مواجه می شویم، در این حالت باید `cache` اندروید را پاک کنیم و بعد پروژه را اجرا کنیم ک برای راحتی کار، بهتر است ک در `package.json` آن را قرار دهیم
ک قبل از اجرا شدن برنامه، کش را پاک کند.
```json
{
  "scripts": {
    "android": "cd android && ./gradlew clean && cd .. && react-native run-android"
  }
}
```
در واقع `gradle` یک مدیریت کننده وابستگی در جاوا می باشد ک با صدا زدن آن و قرار دادن دستور `clean`، هر بار قبل از اجرا شدن برنامه، کش را پاک می کنیم.

#### Flow & Buck
این 2 ابزار ک در `react native` استفاده می شوند، در واقع `flow` در واقع کد ها را تصحیح می کند و بعضی جاها ب ما در نوشتن کد های بهتر کمک می کند و `buck` نیز برای `build` گرفتن سریع کمک می کند.

### errors
🎉 هر گاه ب اروری خوردیم در مرحله اول یک بار فولدر `gradle.` را در فولدر `android` حذف می کنیم سپس از دستور های زیر استفاده می کنیم :
```shell
cd android
./gradlew clean
```
🎉 اگر ب ارور زیر برخوردیم باید ب این صورت عمل کنیم :

`Installed Build Tools revision 31.0.0 is corrupted. Remove and install again using the SDK Manager.`

1. وارد مسیر `C:\Users\user\AppData\Local\Android\Sdk\build-tools\31.0.0` می شویم
2. فایل `d8.bat` را به `dx.bat` تغییر می دهیم.
3. وارد فولدر `bin` می شویم و فایل `d8.jar` را نیز ب `dx.jar` تغییر میدهیم.
