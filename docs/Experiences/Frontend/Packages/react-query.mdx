---
id: react-query
title: React Query
---
Ø§Ø¨Ø²Ø§Ø±ÛŒØ³Øª Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª `state`ØŒ `cache` Ùˆ `request` Ù‡Ø§ÛŒ Ù…Ø§ Ùˆ Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…ÛŒ ØªÙˆØ§Ù† ØªØ¹Ø¯Ø§Ø¯ `useEffect` Ù‡Ø§ÛŒ Ù…Ø§Ù† Ø±Ø§ Ù†ÛŒØ² Ú©Ù… Ú©Ø±Ø¯ Ùˆ Ù…ÛŒ ØªÙˆØ§Ù† Ø¨ ØµÙˆØ±Øª Ø²ÛŒØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯:

[**`Github - React Query Practice`**](https://github.com/mamadfar/react-query_practice__react)

## Install and Use
1. Ù†ØµØ¨ Ø®ÙˆØ¯ Ù¾Ú©ÛŒØ¬ Ùˆ `devtools` Ø¢Ù†
```shell
pnpm add @tanstack/react-query @tanstack/react-query-devtools
```
ğŸ”— [Installation](https://tanstack.com/query/latest/docs/react/installation)

ğŸ”— [Devtools](https://tanstack.com/query/latest/docs/react/devtools)

2. Ù†ØµØ¨ Ù¾Ù„Ø§Ú¯ÛŒÙ† Ù…Ø±Ø¨ÙˆØ· Ø¨ `eslint`
```shell
pnpm add -D @tanstack/eslint-plugin-query
```
ğŸ”— [Eslint Plugin Query](https://tanstack.com/query/latest/docs/react/eslint/eslint-plugin-query)

3. Ø­Ø§Ù„ Ù…ÛŒ ØªÙˆØ§Ù† Ø§Ø² Ø¢Ù† Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯:
```tsx
import {QueryClient, QueryClientProvider} from "@tanstack/react-query";
import {ReactQueryDevtools} from "@tanstack/react-query-devtools";

const queryClient = new QueryClient();

createRoot(document.getElementById('root') as HTMLElement).render(
  <React.StrictMode>
    <QueryClientProvider client={queryClient}>
        <App />
        <ReactQueryDevtools/>
    </QueryClientProvider>
  </React.StrictMode>,
)
```
ğŸš© Ø¨Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† `ReactQueryDevtools` Ø¯Ø± Ù‚Ø³Ù…Øª Ù¾Ø§ÛŒÛŒÙ† ØµÙØ­Ù‡ØŒ ÛŒÚ© Ø¢ÛŒÚ©ÙˆÙ† Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒ Ø´ÙˆØ¯ Ú© Ù…ÛŒ ØªÙˆØ§Ù† Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ Ø±Ø§ Ø¯Ø±ÙˆÙ† Ø¢Ù† Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø±Ø¯ Ú© Ø¨ Ù…Ø§
Ú©Ù…Ú© Ù…ÛŒ Ú©Ù†Ø¯ ØªØ§ Ø±ÙˆÛŒ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ÛŒÙ…Ø§Ù† Ú©Ù†ØªØ±Ù„ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒÙ… Ùˆ Ø®ÛŒÙ„ÛŒ Ø±Ø§Ø­Øª Ø¢Ù† Ù‡Ø§ Ø±Ø§ `debug` Ú©Ù†ÛŒÙ….

4. Ø­Ø§Ù„ Ù…ÛŒ ØªÙˆØ§Ù† Ø¯Ø±ÙˆÙ† Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ù‡Ø§ÛŒÙ…Ø§Ù† Ø§Ø² Ø¢Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
```tsx
import {useId} from "react";
import {useQuery, useMutation, useQueryClient} from "@tanstack/react-query";

const POSTS: {id: number | string, title: string}[] = [
    {id: 1, title: "Post 1"},
    {id: 2, title: "Post 2"},
]

const wait = (duration: number) => {
    return new Promise(resolve => setTimeout(resolve, duration));
}

export const App = () => {

    const uuid = useId();

    const queryClient = useQueryClient();

    const postsQuery = useQuery({
        queryKey: ["posts"], // 1
        queryFn: () => wait(1000).then(() => [...POSTS]), // 2
        staleTime: 1000, // 3
        refetchInterval: 1000, // 4
    });

    const newPostMutation = useMutation({
        mutationFn: (title: string) => {
            return wait(1000).then(() => {
                POSTS.push({id: crypto.randomUUID(), title})
            })
        },
        onSuccess: () => queryClient.invalidateQueries(["posts"])
    });

    if (postsQuery.isLoading) return <h1>Loading...</h1>
    if (postsQuery.isError) return <pre>{JSON.stringify(postsQuery.error)}</pre>

  return (
    <main>
        {postsQuery.data.map(post => (
            <div key={post.id}>{post.title}</div>
        ))}
        <button disabled={newPostMutation.isLoading} onClick={() => newPostMutation.mutate(`New Post ${uuid}`)}>Add New Post</button>
    </main>
  )}
```
### QueryClient
ØªÙˆØ³Ø· Ø§ÛŒÙ† ØªØºÛŒÛŒØ± Ù…Ø§ Ø¨ `react query` Ù…ÛŒ Ú¯ÙˆÛŒÛŒÙ… Ú© Ø¨Ø¹Ø¯ Ø§Ø² 5 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ÛŒ Ù…Ø§ Ø¨ Ø§ØµØ·Ù„Ø§Ø­ Ú©Ù‡Ù†Ù‡ Ù…ÛŒ Ø´ÙˆÙ†Ø¯ØŒ ÛŒØ¹Ù†ÛŒ Ø¨ Ù…Ø¯Øª 5 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ÛŒ Ù…Ø§ Ø±Ø§ `cache` Ú©Ù† Ùˆ Ù‡ÛŒÚ† Ø¯Ø±Ø®ÙˆØ§Ø³ØªÛŒ Ù†Ø²Ù†.
Ø­Ø§Ù„Øª Ù¾ÛŒØ´ ÙØ±Ø¶ Ø¢Ù† 0 Ù…ÛŒ Ø¨Ø§Ø´Ø¯ØŒ ÛŒØ¹Ù†ÛŒ Ù‡Ø±Ø¨Ø§Ø± Ø¯Ø± Ø®ÙˆØ§Ø³Øª Ø¬Ø¯ÛŒØ¯ Ù…ÛŒ Ø²Ù†Ø¯. Ø§ÛŒÙ† Ø­Ø§Ù„Øª Ø¨Ø±Ø§ÛŒ ØªÙ…Ø§Ù…ÛŒ Ø¯Ø± Ø®ÙˆØ§Ø³Øª Ù‡Ø§ Ø§Ø¹Ù…Ø§Ù„ Ù…ÛŒ Ø´ÙˆØ¯ Ú© Ù…ÛŒ ØªÙˆØ§Ù† Ø§ÛŒÙ† Ø¹Ù…Ù„ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù†ÛŒØ² ØªØºÛŒÛŒØ± Ø¯Ø§Ø¯.
```js
const queryClient = new QueryClient({defaultOptions: {queries: {staleTime: 1000 * 60 * 5}}});
```
ğŸ”— [QueryClient](https://tanstack.com/query/latest/docs/react/reference/QueryClient)
### useQuery
Ø¯Ø± ÙˆØ§Ù‚Ø¹ ÛŒÚ© Ù‡ÙˆÚ© Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ú© Ø§Ú¯Ø± Ø¨Ø®ÙˆØ§Ù‡ÛŒÙ… Ø¯Ø§Ø¯Ù‡ Ø§ÛŒ Ø±Ø§ Ø¨Ú¯ÛŒØ±ÛŒÙ… Ø§Ø² Ø¢Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒ Ú©Ù†ÛŒÙ….

ğŸ”— [useQuery](https://tanstack.com/query/latest/docs/react/reference/useQuery)

#### useQuery().data
Ø¯Ø± ÙˆØ§Ù‚Ø¹ ØªÙ…Ø§Ù…ÛŒ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ÛŒ Ø¨Ø±Ú¯Ø´ØªÛŒØŒ Ø¯Ø±ÙˆÙ† Ø§ÛŒÙ† `property` Ù‚Ø±Ø§Ø± Ù…ÛŒÚ¯ÛŒØ±Ù†Ø¯.
#### useQuery().status
Ø¯Ø± ÙˆØ§Ù‚Ø¹ Ø¨ Ù…Ø§ 3 Ù…Ù‚Ø¯Ø§Ø± `error`, `loading` Ùˆ `success` Ø±Ø§ Ø¨Ø±Ù…ÛŒ Ú¯Ø±Ø¯Ø§Ù†Ø¯.
```js
    if (postsQuery.status === "loading") return <h1>Loading...</h1>
    if (postsQuery.status === "error") return <pre>{JSON.stringify(postsQuery.error)}</pre>
```
#### useQuery().fetchStatus
Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…ÛŒ ØªÙˆØ§Ù† `state` Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù `fetching` Ø±Ø§ Ø¨ Ø§ÛŒÙ† ØµÙˆØ±Øª Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø±Ø¯:
```js
postsQuery.status === "fetching" // "idle" -> without any fetching | "paused" -> lose connection
```
#### 1. queryKey
Ø¯Ø± ÙˆØ§Ù‚Ø¹ ÛŒÚ© `Identifire` Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ú© Ø­ØªÙ…Ø§ Ø¨Ø§ÛŒØ¯ ÛŒÙˆÙ†ÛŒÚ© Ø¨Ø§Ø´Ø¯.

- Ø¯Ø± ÙˆØ§Ù‚Ø¹ Ø§ÛŒÙ† `key` Ø¨Ø³ÛŒØ§Ø± Ù…Ù‡Ù… Ø§Ø³ØªØŒ Ø²ÛŒØ±Ø§ Ù…Ø§ Ù…ÛŒ Ø®ÙˆØ§Ù‡ÛŒÙ… Ú© Ø¨Ø± Ø§Ø³Ø§Ø³ ÛŒÚ© `key` Ø®Ø§ØµØŒ ØªØ§Ø¨Ø¹ `queryFn` Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯ Ùˆ ÛŒØ§ Ø¢Ù† Ø±Ø§ `invalidate` Ú©Ù†ÛŒÙ… Ú© Ù…ÛŒ ØªÙˆØ§Ù† Ø§Ø² ÙØ±Ù… Ø²ÛŒØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯:
```js
// /posts -> ["posts"]
// /posts/1 -> ["posts", post.id]
// /posts?authorId=1 -> ["posts", {authorId: 1}]
// /posts/2/comments -> ["posts", post.id, "comments"]
```
ğŸš© Ø¨Ø§ÛŒØ¯ Ø¯Ø± Ù†Ø¸Ø± Ø¯Ø§Ø´Øª Ú© `key`ÛŒÛŒ Ú© Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒ Ú©Ù†ÛŒÙ… Ø¯Ø± ØªØ§Ø¨Ø¹ `queryFn` Ù†ÛŒØ² Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯.

#### 2. queryFn
ÛŒÚ© ØªØ§Ø¨Ø¹ Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ú© Ø¨ ØµÙˆØ±Øª `Promise` Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ùˆ ÙÙ‚Ø· ØªÙˆØ§Ø¨Ø¹ `Promise` Ù‚Ø¨ÙˆÙ„ Ù…ÛŒ Ú©Ù†Ø¯ Ú© Ú©Ø§Ø± Ø¢Ù† Ú¯Ø±ÙØªÙ† Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ Ùˆ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯Ù† Ø¢Ù† Ù‡Ø§ Ù…ÛŒ Ø¨Ø§Ø´Ø¯.

ğŸš© Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø§Ú¯Ø± Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø± Ø§ÙˆÙ„ Ù†ØªÙˆØ§Ù†Ø¯ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ Ø±Ø§ Ø¨Ú¯ÛŒØ±Ø¯ØŒ Ú†Ù†Ø¯ÛŒÙ† Ø¨Ø§Ø± ØªÙ„Ø§Ø´ Ù…ÛŒ Ú©Ù†Ø¯ Ùˆ Ø³Ù¾Ø³ Ø§Ú¯Ø± Ø¨ Ù…Ø´Ú©Ù„ÛŒ Ø¨Ø®ÙˆØ±Ø¯ØŒ Ø§Ø±ÙˆØ± Ø±Ø§ Ø¨Ø±Ù…ÛŒÚ¯Ø±Ø¯Ø§Ù†Ø¯.

- Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ú†Ù†Ø¯ Ø¢Ø±Ú¯ÙˆÙ…Ø§Ù† Ø¯Ø§Ø±Ø¯ Ú© ÛŒÚ©ÛŒ Ø§Ø² Ø¢Ù† Ù‡Ø§ Ø¨Ø³ÛŒØ§Ø± Ù…Ù‡Ù… Ø§Ø³Øª Ú© Ø¢Ù† Ù‡Ù… `queryKey` Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ú© Ù…ÛŒ ØªÙˆØ§Ù† Ø¯Ø± Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø¨ Ø¢Ù† Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´Øª:
```js
  queryFn: ({queryKey}) => wait(1000).then(() => {
    console.log(queryKey);
    return [...POSTS];
  })
```
- Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…ÛŒ ØªÙˆØ§Ù† Ø§Ø² `signal` Ø¨Ø±Ø§ÛŒ `abort` Ú©Ø±Ø¯Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù‡Ø§ Ù†ÛŒØ² Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯:
```js
    const {data} = useQuery({
        queryKey: ["book", bookId],
        queryFn: ({queryKey, signal}) => getBook(queryKey[1], signal)
    });
```
#### 3. staleTime
Ù…ÛŒ ØªÙˆØ§Ù† Ù…Ø´Ø®Øµ Ú©Ø±Ø¯ Ú© Ù…Ø«Ù„Ø§ Ø¨ Ù…Ø¯Øª 1 Ø«Ø§Ù†ÛŒÙ‡ (Ø¨Ø§ÛŒØ¯ Ø¨ Ù…ÛŒÙ„ÛŒ Ø«Ø§Ù†ÛŒÙ‡ Ø¨Ø§Ø´Ø¯ØŒ Ù…Ø«Ù„Ø§ 1000) Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ÛŒ Ù…Ù† Ø±Ø§ `cache` Ú©Ù†.
#### 4. refetchInterval
Ù…ÛŒ ØªÙˆØ§Ù† Ù…Ø´Ø®Øµ Ú©Ø±Ø¯ Ú© Ø§ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø§ Ù‡Ø± Ú†Ù†Ø¯ Ù…ÛŒÙ„ÛŒ Ø«Ø§Ù†ÛŒÙ‡ ÛŒÚ©Ø¨Ø§Ø± Ø§Ù†Ø¬Ø§Ù… Ø´ÙˆØ¯
#### refetchOnMount
Ø¨Ù‡ ØµÙˆØ±Øª Ù¾ÛŒØ´ ÙØ±Ø¶ØŒ `react query` Ø¯ÙˆØ¨Ø§Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ø§ Ø±Ø§ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒ Ø¯Ù‡Ø¯ØŒ Ú© ØªÙˆØ³Ø· Ø§ÛŒÙ† Ù¾Ø±Ø§Ù¾Ø±ØªÛŒØŒ Ù…ÛŒ ØªÙˆØ§Ù† Ø¢Ù† Ø±Ø§ Ú©Ù†ØªØ±Ù„ Ú©Ø±Ø¯.

Ù‡Ù…Ú†Ù†ÛŒÙ† Ø¨Ø§ÛŒØ¯ Ø¯Ø± Ù†Ø¸Ø± Ø¯Ø§Ø´ØªØŒ Ù…Ø«Ù„Ø§ Ø²Ù…Ø§Ù†ÛŒ Ú© Ù…Ø§ Ø¯Ú©Ù…Ù‡ Ø§ÛŒ Ø¯Ø§Ø±ÛŒÙ… Ú© Ù‚Ø±Ø§Ø± Ù‚Ø³Ù…ØªÛŒ Ø§Ø² Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ÛŒ Ú¯Ø±ÙØªÙ‡ Ø´Ø¯Ù‡ Ø±Ø§ Ø¯Ø± Ø´Ø±Ø§ÛŒØ· Ø®Ø§ØµÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¯Ù‡Ø¯ØŒ Ø§Ú¯Ø± Ø§ÛŒÙ† Ú¯Ø²ÛŒÙ†Ù‡ Ø±Ø§ `false` Ù†Ú©Ù†ÛŒÙ…ØŒ
Ù‡Ø±Ø¨Ø§Ø± Ú© Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†ØªÛŒ Ú© Ù…Ø³ÙˆÙ„ Ù†Ù…Ø§ÛŒØ´ Ø¢Ù† Ø¨Ø®Ø´ Ø§Ø³ØªØŒ Ø¯Ø± ØµÙØ­Ù‡ Ø¸Ø§Ù‡Ø± Ù…ÛŒ Ø´ÙˆØ¯ØŒ ÛŒÚ©Ø¨Ø§Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒ Ø´ÙˆØ¯ Ø§Ù…Ø§ Ø§Ú¯Ø± `false` Ø¨Ø§Ø´Ø¯ØŒ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ `cache` Ù…ÛŒ Ø´ÙˆÙ†Ø¯ Ùˆ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø§Ø¶Ø§ÙÙ‡ Ø§ÛŒ Ø²Ø¯Ù‡ Ù†Ù…ÛŒ Ø´ÙˆØ¯.

Ø²Ù…Ø§Ù†ÛŒ Ø§ÛŒÙ† Ú¯Ø²ÛŒÙ†Ù‡ Ø¨Ø§ÛŒØ¯ `true` Ø¨Ø§Ø´Ø¯ Ú© Ø¢Ù† Ø¨Ø®Ø´ Ú© Ù…ÛŒ Ø®ÙˆØ§Ù‡ÛŒÙ… Ø¯Ø± Ø´Ø±Ø§ÛŒØ· Ø®Ø§Øµ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯ØŒ Ø¨Ø³ÛŒØ§Ø± Ø¯Ø§ÛŒÙ†Ø§Ù…ÛŒÚ© Ø¨Ø§Ø´Ø¯.
#### refetchOnWindowFocus
Ù…ÛŒ ØªÙˆØ§Ù† `request` Ø²Ø¯Ù† Ø±Ø§ Ø±ÙˆÛŒ Ø­Ø§Ù„Øª `focus` Ùˆ `unfocus` Ú©Ù†ØªØ±Ù„ Ú©Ø±Ø¯.

#### enabled
ØªÙˆØ³Ø· Ø§ÛŒÙ† Ú¯Ø²ÛŒÙ†Ù‡ Ù…ÛŒ ØªÙˆØ§Ù† Ù…Ø´Ø®Øµ Ú©Ø±Ø¯ Ú© ÛŒÚ© Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø¯Ø± Ú† Ø­Ø§Ù„Øª Ù‡Ø§ÛŒÛŒ Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯ Ú© Ø¨ ØµÙˆØ±Øª `boolean` Ù…ÛŒ Ø¨Ø§Ø´Ø¯.

Ù…Ø«Ù„Ø§ Ø¯Ø± Ù…Ø«Ø§Ù„ Ù¾Ø§ÛŒÛŒÙ†ØŒ `userQuery` Ø¯Ø± ÙˆØ§Ù‚Ø¹ Ø¨ Ø±Ø³Ù¾Ø§Ù†Ø³ `postQuery` ÙˆØ§Ø¨Ø³ØªÙ‡ Ø§Ø³ØªØŒ
Ù¾Ø³ ØªÙˆØ³Ø· Ø§ÛŒÙ† Ú¯Ø²ÛŒÙ†Ù‡ Ù…Ø´Ø®Øµ Ù…ÛŒ Ú©Ù†ÛŒÙ… Ú© ÙÙ‚Ø· Ø²Ù…Ø§Ù†ÛŒ `userQuery` Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯ Ú© Ù…Ø§ ÛŒÚ© `userId` Ø§Ø² `postQuery` Ø¯Ø±ÛŒØ§ÙØª Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´ÛŒÙ….
```tsx
export const Post:FC<{id: number}> = ({id}) => {

    const postQuery = useQuery({
        queryKey: ["posts", id],
        queryFn: () => getPostService(id),
    });

    const userQuery = useQuery({
        queryKey: ["users", postQuery?.data?.userId],
        queryFn: () => getUserService(postQuery?.data?.userId),
        enabled: postQuery?.data?.userId != null,
    });

    if (postQuery.status === "loading") return <h1>Loading...</h1>;
    if (postQuery.status === "error") return <h1>{JSON.stringify(postQuery.error)}</h1>;

    return (
        <section>
            <h1>{postQuery?.data?.title}</h1>
            <small>{userQuery.isLoading
                ? "Loading User..."
                : userQuery.isError
                    ? "Error Loading User"
                    : userQuery.data.name
            }
            </small>
            <p>{postQuery.data.body}</p>
        </section>
    )};
```
[enabled](https://tanstack.com/query/v4/docs/react/guides/disabling-queries)

---

### useMutation
Ø¯Ø± ÙˆØ§Ù‚Ø¹ Ù‡ÙˆÚ©ÛŒ Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ú© Ø¨Ø±Ø¹Ú©Ø³ `useQuery`ØŒ Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø§Ø¯Ù‡ ÛŒØ§ Ø§Ø¯ÛŒØª Ø§Ø² Ø¢Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒÚ©Ù†ÛŒÙ… Ú© Ù…ÛŒ ØªÙˆØ§Ù† Ø¯Ø§Ø¯Ù‡ ÛŒ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø±Ø§ Ø¨ Ø¢Ù† Ù¾Ø§Ø³ Ø¯Ø§Ø¯.

ğŸ”— [useMutation](https://tanstack.com/query/latest/docs/react/reference/useMutation)

#### mutationFn
ÛŒÚ© ØªØ§Ø¨Ø¹ Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ú© Ø¨ ØµÙˆØ±Øª `Promise` Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ùˆ ÙÙ‚Ø· ØªÙˆØ§Ø¨Ø¹ `Promise` Ù‚Ø¨ÙˆÙ„ Ù…ÛŒ Ú©Ù†Ø¯ Ùˆ Ø¯Ù‚ÛŒÙ‚Ø§ Ù…Ø§Ù†Ù†Ø¯ `queryFn` Ù…ÛŒ Ø¨Ø§Ø´Ø¯ØŒ Ø¨Ø§ Ø§ÛŒÙ† ÙØ±Ù‚ Ú© Ù…ÛŒ ØªÙˆØ§Ù† Ø¨ Ø¢Ù† Ø¯Ø§Ø¯Ù‡ Ù¾Ø§Ø³ Ø¯Ø§Ø¯.

#### mutate & mutateAsync
Ø¯Ø± ÙˆØ§Ù‚Ø¹ Ù…ØªØ¯ Ù‡Ø§ÛŒÛŒ Ø§Ø² Ù‡ÙˆÚ© `useMutation` Ù…ÛŒ Ø¨Ø§Ø´Ù†Ø¯ Ú© Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ù…Ø§ Ø±Ø§ Ø¨ Ù‡ÙˆÚ© Ù…ÛŒ Ø¯Ù‡Ø¯ Ùˆ Ú©Ø§Ø±Ø§ÛŒÛŒ Ø¢Ù† Ù‡Ø§ ÛŒÚ©ÛŒ Ù…ÛŒ Ø¨Ø§Ø´Ø¯ØŒ ÙÙ‚Ø· `mutateAsync` Ø¨ ØµÙˆØ±Øª `async` Ø§Ø³Øª.
```tsx
    const handleSubmit = (e: FormEvent) => {
        e.preventDefault();
        createPostMutation.mutateAsync({
            title: titleRef.current?.value as string,
            body: titleRef.current?.value as string,
        }, {
            onSuccess: (data, variables, context) => {},
            onError: (error, variables, context) => {},
            onSettled: (data, error, variables, context) => {},
        }).then(() => {
            //...
        })
        createPostMutation.mutate({
            title: titleRef.current?.value as string,
            body: titleRef.current?.value as string,
        }, {
            onSuccess: (data, variables, context) => {},
            onError: (error, variables, context) => {},
            onSettled: (data, error, variables, context) => {},
        })
    }
```
- Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…ÛŒ ØªÙˆØ§Ù† `onSuccess`, `onError` Ùˆ `onSettled` Ø±Ø§ Ù†ÛŒØ² Ø¨ Ø¹Ù†ÙˆØ§Ù† Ø¢Ø±Ú¯ÙˆÙ…Ø§Ù† Ø¯ÙˆÙ… Ø¨ Ø¢Ù† Ù‡Ø§ Ù¾Ø§Ø³ Ø¯Ø§Ø¯.
- Ù‡Ø±Ú¯Ø§Ù‡ Ø¨Ø®ÙˆØ§Ù‡ÛŒÙ… Ø¨Ø¹Ø¯ Ø§Ø² `mutate` Ú©Ø±Ø¯Ù†ØŒ Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ Ø¨ ØµÙØ­Ù‡ ÛŒØ§ Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ø¯ÛŒÚ¯Ø± Ø¨ÙØ±Ø³ØªÛŒÙ…ØŒ Ù…ÛŒ ØªÙˆØ§Ù†ÛŒÙ… Ø¨ ØµÙˆØ±Øª Ø²ÛŒØ± Ø¹Ù…Ù„ Ú©Ù†ÛŒÙ…:
```tsx title="src/components/CreatePost.tsx"
    const createPostMutation = useMutation({
        mutationFn: createPostService,
        onSuccess: (data) => {
            setCurrentPage(<Post id={data.id}/>)
        },
    });
```

#### onSuccess, onError, onSettled, onMutate
Ù…ÛŒ ØªÙˆØ§Ù† Ø§ÛŒÙ† Ù…ØªØ¯ Ù‡Ø§ Ø±Ø§ Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ `useMutation` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯.
```tsx
    const createPostMutation = useMutation({
        mutationFn: (variables) => { // 1
            return createPostService(variables)
        },
        onSuccess: (data, variables, context) => { // 2
            console.log(context)
        },
        onError: (error, variables, context) => { // 3
          //...
        },
        onSettled: (data, error, variables, context) => { // 4
          //...
        },
        onMutate: (variables) => { // 5
            return {hi: "bye"}
        }
    });
```
##### 1. mutationFn
Ù…ÛŒ ØªÙˆØ§Ù† Ø¨ ØµÙˆØ±Øª Ø®Ù„Ø§ØµÙ‡ ØªØ± Ù‡Ù… Ù†ÙˆØ´ØªØŒ Ø§Ú¯Ø± Ø¨Ø®ÙˆØ§Ù‡ÛŒÙ… Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ±ØŒ Ù…Ù‚Ø§Ø¯ÛŒØ±Ù…Ø§Ù† Ø±Ø§ Ø¨ ØªØ§Ø¨Ø¹Ù…Ø§Ù† Ù¾Ø§Ø³ Ø¨Ø¯Ù‡ÛŒÙ…:
```ts
    mutationFn: createPostService
```
##### 2. onSuccess
Ù‡Ù†Ú¯Ø§Ù… Ù…ÙˆÙÙ‚ÛŒØª Ø¢Ù…ÛŒØ² Ø¨ÙˆØ¯Ù† Ø¯Ø±Ø®ÙˆØ§Ø³ØªØŒ Ø§Ø¬Ø±Ø§ Ù…ÛŒ Ø´ÙˆØ¯ Ùˆ 3 Ø¢Ø±Ú¯ÙˆÙ…Ø§Ù† ÙˆØ±ÙˆØ¯ÛŒ Ø¯Ø§Ø±Ø¯ Ú© Ø§ÙˆÙ„ÛŒ Ø¯Ø§Ø¯Ù‡ Ø¨Ø±Ú¯Ø´ØªÛŒØŒ Ø¯ÙˆÙ…ÛŒ Ù…Ù‚Ø§Ø¯ÛŒØ±ÛŒ Ú© Ø¨ ØªØ§Ø¨Ø¹ Ø§ØµÙ„ÛŒ Ù¾Ø§Ø³ Ø¯Ø§Ø¯Ù‡ Ø¨ÙˆØ¯ÛŒÙ…ØŒ 3 Ù…Ù‚Ø§Ø¯ÛŒØ±ÛŒ Ú© `onMutate` Ø¨Ø±Ù…ÛŒÚ¯Ø±Ø¯Ø§Ù†Ø¯.
##### 3. onError
Ù…Ø§Ù†Ù†Ø¯ `onSuccess` Ù…ÛŒ Ø¨Ø§Ø´Ø¯ØŒ ÙÙ‚Ø· Ø§ÙˆÙ„ÛŒÙ† Ù¾Ø§Ø±Ø§Ù…ØªØ± Ø¢Ù†ØŒ Ø§Ø±ÙˆØ± Ø±Ø§ Ù‡Ù†Ú¯Ø§Ù… Ø®Ø·Ø§ Ø¨Ø±Ù…ÛŒÚ¯Ø±Ø¯Ø§Ù†Ø¯.
##### 4. onSettled
Ø¨Ø¹Ø¯ Ø§Ø² `onSuccess` Ùˆ `onError` Ø§Ø¬Ø±Ø§ Ù…ÛŒ Ø´ÙˆØ¯ Ùˆ `error` Ùˆ `data` Ø±Ø§ Ø¨Ø±Ù…ÛŒÚ¯Ø±Ø¯Ø§Ù†Ø¯.
##### 5. onMutate
Ø¯Ø± ÙˆØ§Ù‚Ø¹ `context` Ù…Ø§ Ø±Ø§ Ù…ÛŒØ³Ø§Ø²Ø¯ Ùˆ Ù‡Ø± Ù…Ù‚Ø¯Ø§Ø±ÛŒ Ø±Ø§ Ú© Ø¨Ø±Ú¯Ø´Øª Ø¨Ø¯Ù‡ÛŒÙ…ØŒ Ø¯Ø± 3 Ù…ØªØ¯ Ù‚Ø¨Ù„ØŒ Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ùˆ Ù‚Ø¨Ù„ Ø§Ø² Ù‡Ù…Ù‡ Ø¢Ù† Ù‡Ø§ Ø§Ø¬Ø±Ø§ Ù…ÛŒ Ø´ÙˆØ¯.

#### retry & retryDelay
ØªÙˆØ³Ø· Ø§ÛŒÙ† 2 Ù¾Ø±Ø§Ù¾Ø±ØªÛŒØŒ Ù…ÛŒ ØªÙˆØ§Ù† ØªØ¹Ø¯Ø§Ø¯ Ùˆ Ø²Ù…Ø§Ù† ØªÚ©Ø±Ø§Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø±Ø§ Ù…Ø´Ø®Øµ Ú©Ø±Ø¯:
```tsx
    const createPostMutation = useMutation({
        mutationFn: createPostService,
        retry: 3,
        retryDelay: 3000
    });
```
#### useMutation().data
Ø§Ú¯Ø± Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…Ù‚Ø¯Ø§Ø±ÛŒ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯ØŒ Ù…ÛŒ ØªÙˆØ§Ù† ØªÙˆØ³Ø· Ø§ÛŒÙ† Ù¾Ø±Ø§Ù¾Ø±ØªÛŒØŒ Ø¢Ù† Ø±Ø§ Ø¨Ú¯ÛŒØ±ÛŒÙ….
#### useMutation().error
Ø§Ø±ÙˆØ± Ù‡Ø§ÛŒ Ø¨Ø±Ú¯Ø´ØªÛŒ Ø±Ø§ Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒ Ø¯Ù‡Ø¯.
#### useMutation().status
Ø¯Ø± ÙˆØ§Ù‚Ø¹ 4 Ù…Ù‚Ø¯Ø§Ø± Ø¯Ø§Ø±Ø¯ Ú© 3 Ù…Ù‚Ø¯Ø§Ø± `error`Ùˆ `loading` Ùˆ `succecc` Ù…Ø§Ù†Ù†Ø¯ `useQuery().status` Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ø§Ù…Ø§ Ù…Ù‚Ø¯Ø§Ø± 4Ù… Ø¯Ø± ÙˆØ§Ù‚Ø¹ `idle` Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ú© Ø¯Ø±ÙˆØ§Ù‚Ø¹ Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ù…ÛŒ Ø¨Ø§Ø´Ø¯ØŒ
Ù…Ø«Ù„Ø§ Ù‚Ø¨Ù„ Ø§Ø² Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø¨Ø±Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ø¯Ø±Ø®ÙˆØ§Ø³Øª.

#### isLoading & isError & isSuccess & isIdle (useMutation)
Ø¯Ø± ÙˆØ§Ù‚Ø¹ Ù…Ù‚Ø§Ø¯ÛŒØ± Ø¨Ø±Ú¯Ø´ØªÛŒ Ù‡ÙˆÚ© `useQuery` Ùˆ `useMutation` Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ú© Ù…ÛŒ ØªÙˆØ§Ù† Ø§Ø² Ø¢Ù† Ù‡Ø§ Ø¯Ø±ÙˆÙ† Ú©Ø¯ Ù‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯ Ùˆ Ù†ÛŒØ§Ø² Ø¨ Ú©Ø§Ù†ÙÛŒÚ¯ Ùˆ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² `state` Ø¬Ø¯Ø§ Ù†Ù…ÛŒ Ø¨Ø§Ø´Ø¯.

### useQueryClient
Ø¯Ø± ÙˆØ§Ù‚Ø¹ ØªÙ…Ø§Ù…ÛŒ Ù…Ù‚Ø§Ø¯ÛŒØ± Ù‚Ø±Ø§Ø± Ú¯Ø±ÙØªÙ‡ Ø´Ø¯Ù‡ Ø¯Ø± `()const queryClient = new QueryClient` Ø±Ø§ Ú© Ø¯Ø± Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ø§ØµÙ„ÛŒ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù‡ Ø§ÛŒÙ… Ø±Ø§ Ø¨Ø±Ù…ÛŒÚ¯Ø±Ø¯Ø§Ù†Ø¯.

ğŸ”— [useQueryClient](https://tanstack.com/query/latest/docs/react/reference/useQueryClient)

#### invalidateQueries
Ù…Ù‚Ø§Ø¯ÛŒØ± Ø¨Ø±Ú¯Ø´ØªÛŒ Ø±Ø§ Ù…ÛŒ ØªÙˆØ§Ù† ØªÙˆØ³Ø· `key` Ù‡Ø§ÛŒ Ø¢Ù† Ù‡Ø§ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯ Ùˆ ØªØºÛŒÛŒØ±Ø§ØªÛŒ Ø±ÙˆÛŒ Ø¢Ù† Ù‡Ø§ Ø§Ù†Ø¬Ø§Ù… Ø¯Ø§Ø¯ Ùˆ Ø§ÛŒÙ† `key` Ù‡Ø§ Ø¨Ø§ÛŒØ¯ Ø¨ ØµÙˆØ±Øª `array` Ø¨ Ø§ÛŒÙ† Ù…ØªØ¯ Ù¾Ø§Ø³ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯.

- Ù‡Ù…Ú†Ù†ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ù‡Ù†Ú¯Ø§Ù… `redirect` Ú©Ø±Ø¯Ù† ÛŒÙˆØ²Ø±ØŒ Ø¨ ÛŒÚ© ØµÙØ­Ù‡ Ø¯ÛŒÚ¯Ø±ØŒ Ù…Ø«Ù„Ø§ Ù„ÛŒØ³Øª ØªÙ…Ø§Ù…ÛŒ `post` Ù‡Ø§ÛŒ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ØŒ Ù…ÛŒ Ø®ÙˆØ§Ù‡ÛŒÙ… Ú© Ù„ÛŒØ³Øª Ù‡Ø§ Ø³Ø±ÛŒØ¹Ø§ Ø¢Ù¾Ø¯ÛŒØª Ø´ÙˆÙ†Ø¯ØŒ Ú© Ø¯Ø± Ø§ÛŒÙ† Ø­Ø§Ù„Øª Ù…ÛŒ ØªÙˆØ§Ù† Ø¨ ØµÙˆØ±Øª Ø²ÛŒØ± Ø¹Ù…Ù„ Ú©Ø±Ø¯:
```tsx
    const queryClient = useQueryClient();

    const createPostMutation = useMutation({
        mutationFn: createPostService,
        onSuccess: (data) => {
            setCurrentPage(<Post id={data.id}/>)
            queryClient.invalidateQueries(["posts"], {
                exact: true
            });
        },
    });
```
- Ø¯Ø± Ø§ÛŒÙ† Ø­Ø§Ù„Øª Ù…Ø§ Ù…ÛŒ Ú¯ÙˆÛŒÛŒÙ… Ú© Ø¨Ø¹Ø¯ Ø§Ø² Ø±ÙØªÙ† Ø¨ Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ø¯ÛŒÚ¯Ø±ØŒ ØªÙ…Ø§Ù…ÛŒ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨ Ú©Ù„ÛŒØ¯ `posts` Ø±Ø§ `invalidate` Ú©Ù† Ùˆ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø±Ø§ Ø¨Ú¯ÛŒØ±.
Ù‡Ù…Ú†Ù†ÛŒÙ† Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ Ø¨ ØµÙˆØ±Øª `Promise` Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ú© Ù…ÛŒ ØªÙˆØ§Ù† Ø¨Ø¹Ø¯ Ø§Ø² Ø¢Ù† Ú©Ø§Ø±ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø¯Ø§Ø¯.
- Ø¯Ø± ÙˆØ§Ù‚Ø¹ Ø¨ Ø¹Ù†ÙˆØ§Ù† Ø¢Ø±Ú¯ÙˆÙ…Ø§Ù† Ø¯ÙˆÙ…ØŒ Ù…ÛŒ ØªÙˆØ§Ù† ÛŒÚ©Ø³Ø±ÛŒ `filter` Ø±Ø§ Ø±ÙˆÛŒ `invalidate` Ú©Ø±Ø¯Ù†Ù…Ø§Ù† Ø§Ø¹Ù…Ø§Ù„ Ú©Ù†ÛŒÙ…ØŒ Ù…Ø«Ù„Ø§ Ø¯Ø± Ø§ÛŒÙ† Ø­Ø§Ù„ØªØŒ Ø§Ú¯Ø± Ù…Ø§ ÙÛŒÙ„ØªØ±ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ù†Ú©Ù†ÛŒÙ…ØŒ Ø¯Ø± ÙˆØ§Ù‚Ø¹ ØªÙ…Ø§Ù…ÛŒ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ÛŒÛŒ Ú© ÙˆØ§Ø¨Ø³ØªÙ‡ Ø¨ ÛŒÚ© Ù…Ø«Ù„Ø§ `id` Ù†ÛŒØ² Ù…ÛŒ Ø¨Ø§Ø´Ù†Ø¯ Ùˆ
Ø¯Ø± `queryKey` Ø¢Ù† Ù‡Ø§ Ø§Ø² Ú©Ù„ÛŒØ¯ `posts` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª Ø±Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ `invalidate` Ù…ÛŒ Ú©Ù†Ø¯
Ú© Ø¯Ø± Ø§ÛŒÙ† Ø­Ø§Ù„Øª Ù…Ø§ Ú¯Ø²ÛŒÙ†Ù‡ `exact` Ø±Ø§ Ù‚Ø±Ø§Ø± Ù…ÛŒ Ø¯Ù‡ÛŒÙ… ØªØ§ ÙÙ‚Ø· Ø§ÛŒÙ† `queryKey` Ø¯Ø± ÙˆØ§Ù‚Ø¹ `invalidate` Ø´ÙˆØ¯.
- ÙÛŒÙ„ØªØ± Ù‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø±ÛŒ Ù†ÛŒØ² Ø¯Ø§Ø±Ø¯ Ú© Ù…ÛŒ ØªÙˆØ§Ù† Ø¯Ø± Ø¯Ø§Ú©ÛŒÙˆÙ…Ù†Øª Ø¢Ù† Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯ (Ø­ØªÙ…Ø§ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ø´ÙˆØ¯!).

ğŸ”— [invalidateQueries](https://tanstack.com/query/latest/docs/react/guides/query-invalidation)

#### setQueryData
Ø¯Ø± ÙˆØ§Ù‚Ø¹ ØªÙˆØ³Ø· Ø§ÛŒÙ† Ù…ØªØ¯ Ù…ÛŒ ØªÙˆØ§Ù† Ø¨ ØµÙˆØ±Øª Ø¯Ø³ØªÛŒØŒ Ù…Ù‚Ø§Ø¯ÛŒØ± Ø¯Ù„Ø®ÙˆØ§Ù‡Ù…Ø§Ù† Ø±Ø§ Ø¨ `cache` Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒÙ… Ú© Ø§Ú¯Ø± Ø§Ø² ØµÙØ­Ù‡ Ø§ÛŒ Ø¨ ØµÙØ­Ù‡ ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ÛŒ ØªØ§Ø²Ù‡ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ØŒ Ù…ÛŒ Ø±ÙˆÛŒÙ…ØŒ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ Ø¯Ø± Ø¢Ù†Ø¬Ø§ Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø§Ø´Ù†Ø¯:
```tsx
    const createPostMutation = useMutation({
        mutationFn: createPostService,
        onSuccess: (data) => {
            queryClient.setQueryData(["posts", data.id], data, (oldData) => {
                return // newData
            });
            setCurrentPage(<Post id={data.id}/>);
            queryClient.invalidateQueries(["posts"], {exact: true});
        },
    });
```
- Ø¯Ø± ÙˆØ§Ù‚Ø¹ Ø¢Ø±Ú¯ÙˆÙ…Ø§Ù† Ø§ÙˆÙ„ Ø¢Ù† `queryKey` Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ùˆ Ø¢Ø±Ú¯ÙˆÙ…Ø§Ù† Ø¯ÙˆÙ… Ø¢Ù† Ù†ÛŒØ² Ù…Ù‚Ø¯Ø§Ø±ÛŒ Ú© Ù…ÛŒ Ø®ÙˆØ§Ù‡ÛŒÙ… `cache` Ø´ÙˆØ¯ Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ùˆ Ø¨ Ø¢Ø±Ú¯ÙˆÙ…Ø§Ù† Ø³ÙˆÙ… Ø¢Ù† Ù†ÛŒØ² Ú© ØªØ§Ø¨Ø¹ Ù…ÛŒ Ø¨Ø§Ø´Ø¯ Ú© Ø¯Ø§Ø¯Ù‡ Ù‚Ø¨Ù„ÛŒ ÛŒØ§ ÙØ¹Ù„ÛŒ Ø±Ø§
Ø¨Ø±Ù…ÛŒÚ¯Ø±Ø¯Ø§Ù†Ø¯ Ùˆ Ù…ÛŒ ØªÙˆØ§Ù† Ø§Ø² Ø¢Ù† Ø¯Ø± Ú©Ù†Ø§Ø± Ø¯Ø§Ø¯Ù‡ Ø¬Ø¯ÛŒØ¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯ Ùˆ Ù…Ù‚Ø¯Ø§Ø± Ù†Ù‡Ø§ÛŒÛŒ Ø±Ø§ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯ Ú© Ù‡Ù…Ø§Ù† Ø¯Ø§Ø¯Ù‡ Ø¬Ø¯ÛŒØ¯ Ù…ÛŒ Ø¨Ø§Ø´Ø¯ØŒ Ø¯Ø± ÙˆØ§Ù‚Ø¹ Ø§ÛŒÙ† ØªØ§Ø¨Ø¹ ÛŒÚ© `updater` Ù…ÛŒ Ø¨Ø§Ø´Ø¯.

ğŸ”— [setQueryData](https://tanstack.com/query/v4/docs/react/reference/QueryClient#queryclientsetquerydata)

#### getQueryData & cancelQueries
Ø¨Ø¹Ø¶ÛŒ Ù…ÙˆØ§Ù‚Ø¹ Ù…Ø§ Ù†ÛŒØ§Ø² Ø¯Ø§Ø±ÛŒÙ… Ú© Ù‚Ø¨Ù„ Ø§Ø² Ø§ÛŒÙ†Ú©Ù‡ Ø¯Ø§Ø¯Ù‡ Ù…Ø§ Ø¨ Ø¨Ú© Ø§Ø±Ø³Ø§Ù„ Ø´ÙˆØ¯ØŒ Ø¯Ø± `UI` Ø¢Ù¾Ø¯ÛŒØª Ø´ÙˆØ¯ Ùˆ Ø§Ú¯Ø± Ø§Ø±ÙˆØ±ÛŒ Ø¯Ø§Ø´ØªÛŒÙ…ØŒ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ Ø±Ø§ Ø¨ Ø­Ø§Ù„Øª Ù‚Ø¨Ù„ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†ÛŒÙ…ØŒ Ú© Ø¯Ø± Ø§ÛŒÙ† Ø­Ø§Ù„Øª Ù…ÛŒ ØªÙˆØ§Ù†ÛŒÙ… Ø§Ø² `Optimistic Updates` Ø¨ ØµÙˆØ±Øª Ø²ÛŒØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…:
```tsx
useMutation({
  mutationFn: updateTodo,
  // When mutate is called:
  onMutate: async (newTodo) => {
    // Cancel any outgoing refetches
    // (so they don't overwrite our optimistic update)
    await queryClient.cancelQueries({ queryKey: ['todos', newTodo.id] })

    // Snapshot the previous value
    const previousTodo = queryClient.getQueryData(['todos', newTodo.id])

    // Optimistically update to the new value
    queryClient.setQueryData(['todos', newTodo.id], newTodo)

    // Return a context with the previous and new todo
    return { previousTodo, newTodo }
  },
  // If the mutation fails, use the context we returned above
  onError: (err, newTodo, context) => {
    queryClient.setQueryData(
      ['todos', context.newTodo.id],
      context.previousTodo,
    )
  },
  // Always refetch after error or success:
  onSettled: (newTodo) => {
    queryClient.invalidateQueries({ queryKey: ['todos', newTodo.id] })
  },
})
```
ğŸ”— [Optimistic Updates](https://tanstack.com/query/v4/docs/react/guides/optimistic-updates)

## Tips
1. Ø¨Ù‡ØªØ± Ø§Ø³Øª Ø§Ø² `axios` Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§ Ø§ÛŒÙ† Ù¾Ú©ÛŒØ¬ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯ Ø¨Ø¬Ø§ÛŒ `fetch`ØŒ Ø²ÛŒØ±Ø§ `axios` Ø®ÙˆØ¯Ø´ `error handling` Ø±Ø§ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒ Ø¯Ù‡Ø¯.
2. Ø§Ú¯Ø± Ù¾ÛŒØ¬ Ù…Ø§ `unfocus` Ø´ÙˆØ¯ Ùˆ Ø¯ÙˆØ¨Ø§Ø±Ù‡ `focus` Ø´ÙˆØ¯ ÛŒØ§ Ø§Ù†ØªØ±Ù†Øª Ù…Ø§ Ù‚Ø·Ø¹ Ùˆ ÙˆØµÙ„ Ø´ÙˆØ¯ØŒ `react query` Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¹Ù…Ù„ÛŒØ§Øª `fetch` Ø±Ø§ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒ Ø¯Ù‡Ø¯.
3. Ù‡Ù… Ú†Ù†ÛŒÙ† `react query` Ù‡Ù†Ú¯Ø§Ù… Ø¬Ø§Ø¨Ù‡ Ø¬Ø§ÛŒÛŒ Ø¨ÛŒÙ† Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ù‡Ø§ØŒ Ø¨Ø®Ø§Ø·Ø± `caching`ØŒ Ø§Ø¨ØªØ¯Ø§ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ø±Ø§ Ù†Ø´Ø§Ù† Ù…ÛŒ Ø¯Ù‡Ø¯ Ùˆ Ù¾Ø´Øª ØµØ­Ù†Ù‡ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ Ø±Ø§ `fetch` Ù…ÛŒ Ú©Ù†Ø¯ Ùˆ Ø¨Ø§ Ø¯Ø§Ø¯Ù‡ Ù‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ù…ÛŒ Ú©Ù†Ø¯.
4. Ù…ÛŒ ØªÙˆØ§Ù† ÛŒÚ© Ú©Ø§Ø³ØªÙˆÙ… Ù‡ÙˆÚ© Ø¯Ø±Ø³Øª Ú©Ø±Ø¯ Ùˆ Ø¯Ø±Ø®ÙˆØ§Ø³ØªÙ…Ø§Ù† Ø±Ø§ Ø¨Ø§ `react query` Ø¨Ø²Ù†ÛŒÙ… Ùˆ Ø¢Ù† Ø±Ø§ Ø¯Ø± Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ù‡Ø§ÛŒ ÙØ±Ø²Ù†Ø¯ Ú© Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…ØŒ Ø¨Ø¯ÙˆÙ† Ø¢Ù†Ú©Ù‡ Ú†Ù†Ø¯ÛŒÙ† Ø¨Ø§Ø± Ø§ÛŒÙ† Ø¯Ø±Ø®ÙˆØ§Ø³Øª Ø²Ø¯Ù‡ Ø´ÙˆØ¯.