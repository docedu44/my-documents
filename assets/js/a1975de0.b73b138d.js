"use strict";(self.webpackChunkmy_documents=self.webpackChunkmy_documents||[]).push([[1477],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>m});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=o.createContext({}),c=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=c(e.components);return o.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,k=u["".concat(p,".").concat(m)]||u[m]||d[m]||a;return n?o.createElement(k,i(i({ref:t},s),{},{components:n})):o.createElement(k,i({ref:t},s))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var c=2;c<a;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},3917:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var o=n(7462),r=(n(7294),n(3905));const a={id:"node-ts",title:"Node with TS",author:"mamadfar"},i=void 0,l={unversionedId:"Experiences/Deployment/docker/node-ts",id:"Experiences/Deployment/docker/node-ts",title:"Node with TS",description:"Dcokerfile",source:"@site/docs/Experiences/Deployment/docker/node-ts.mdx",sourceDirName:"Experiences/Deployment/docker",slug:"/Experiences/Deployment/docker/node-ts",permalink:"/my-documents/docs/Experiences/Deployment/docker/node-ts",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Experiences/Deployment/docker/node-ts.mdx",tags:[],version:"current",frontMatter:{id:"node-ts",title:"Node with TS",author:"mamadfar"},sidebar:"tutorialSidebar",previous:{title:"docker-nginx-react",permalink:"/my-documents/docs/Experiences/Deployment/docker/docker-react"},next:{title:"nginx-react",permalink:"/my-documents/docs/Experiences/Deployment/nginx/nginx-react"}},p={},c=[{value:"Dcokerfile",id:"dcokerfile",level:2},{value:"Without Docker Compose",id:"without-docker-compose",level:3},{value:"With Docker Compose",id:"with-docker-compose",level:3}],s={toc:c};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"dcokerfile"},"Dcokerfile"),(0,r.kt)("p",null,"To run a Node.js and TypeScript application on Docker, you'll need to create a Dockerfile that installs Node.js and TypeScript, and then builds and runs the application. Here's a step-by-step guide on how to do it:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create a new directory for your application and navigate into it:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir my-app && cd my-app\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Create a new ",(0,r.kt)("inlineCode",{parentName:"li"},"package.json")," file with the following content:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "my-app",\n  "version": "1.0.0",\n  "description": "",\n  "scripts": {\n    "start": "node dist/index.js",\n    "build": "tsc"\n  },\n  "dependencies": {\n    "express": "^4.17.1"\n  },\n  "devDependencies": {\n    "@types/express": "^4.17.13",\n    "typescript": "^4.3.5"\n  }\n}\n')),(0,r.kt)("p",null,"This will define your Node.js and TypeScript dependencies, as well as the scripts that will build and run your application."),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Create a new ",(0,r.kt)("inlineCode",{parentName:"li"},"tsconfig.json")," file with the following content:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "compilerOptions": {\n    "target": "ES2020",\n    "module": "commonjs",\n    "outDir": "dist",\n    "strict": true,\n    "esModuleInterop": true\n  },\n  "exclude": [\n    "node_modules"\n  ]\n}\n')),(0,r.kt)("p",null,"This will define your TypeScript compiler options, and tell it to output the compiled JavaScript files into the ",(0,r.kt)("inlineCode",{parentName:"p"},"dist")," directory."),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Create a new ",(0,r.kt)("inlineCode",{parentName:"li"},"Dockerfile")," file with the following content:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-Dockerfile"},'FROM node:18-alpine\n\nWORKDIR /app\n\nCOPY package*.json ./\n\nRUN npm install\n\nCOPY . .\n\nRUN npm run build\n\nCMD [ "npm", "start" ]\n')),(0,r.kt)("p",null,"This Dockerfile will create a new image that's based on the official Node.js 14 Alpine image, copy your ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"package-lock.json")," files into the ",(0,r.kt)("inlineCode",{parentName:"p"},"/app")," directory, install your dependencies, copy the rest of your application files, build your TypeScript code, and start your application."),(0,r.kt)("h3",{id:"without-docker-compose"},"Without Docker Compose"),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"Build your Docker image by running the following command:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker build -t my-app .\n")),(0,r.kt)("p",null,"This will build a new Docker image called ",(0,r.kt)("inlineCode",{parentName:"p"},"my-app"),"."),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},"Run your Docker container by running the following command:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"docker run -p 8080:8080 my-app\n")),(0,r.kt)("p",null,"This will run your Docker container and map port 8080 from your host to port 8080 in the container."),(0,r.kt)("p",null,"That's it! Your Node.js and TypeScript application is now running on Docker. You can access it by visiting ",(0,r.kt)("inlineCode",{parentName:"p"},"http://localhost:8080")," in your web browser."),(0,r.kt)("h3",{id:"with-docker-compose"},"With Docker Compose"),(0,r.kt)("ol",{start:5},(0,r.kt)("li",{parentName:"ol"},"Create a ",(0,r.kt)("inlineCode",{parentName:"li"},"docker-compose.yml")," file:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'version: "3"\nservices:\n  app:\n    build: .\n    ports:\n      - "5000:5000"\n    environment:\n      NODE_ENV: production\n      PORT: 5000\n')),(0,r.kt)("p",null,"This ",(0,r.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," file defines a service called ",(0,r.kt)("inlineCode",{parentName:"p"},"app")," that builds the Docker image from the Dockerfile in the current directory (",(0,r.kt)("inlineCode",{parentName:"p"},"."),"). It maps the container port ",(0,r.kt)("inlineCode",{parentName:"p"},"3000")," to the host port ",(0,r.kt)("inlineCode",{parentName:"p"},"3000"),", and sets the ",(0,r.kt)("inlineCode",{parentName:"p"},"NODE_ENV")," environment variable to ",(0,r.kt)("inlineCode",{parentName:"p"},"production"),"."),(0,r.kt)("ol",{start:6},(0,r.kt)("li",{parentName:"ol"},"Start the application:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"docker-compose up\n")),(0,r.kt)("p",null,"This command builds the Docker image and starts the container. You should see the application logs in the console."))}d.isMDXComponent=!0}}]);